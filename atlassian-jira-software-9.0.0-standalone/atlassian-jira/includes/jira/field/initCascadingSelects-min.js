define("jira/field/init-cascading-selects",["jquery","jira/util/events/reasons","jira/util/events/types","jira/util/events"],function(e,i,n,t){"use strict";function a(i){e(i||document.body).find("div.aui-field-cascadingselect").add("tr.aui-field-cascadingselect").add("td.aui-field-cascadingselect").each(function(){function i(){var i,n=t.find("option:selected").attr("class");n!==a&&(i=e("<span />").insertAfter(c),c.detach(),c.find("option").each(function(e,i){i.parentNode.removeChild(this)}),c.insertAfter(i),i.remove(),d.filter("."+t.find("option:selected").attr("class")).appendTo(c),s.hasClass(t.find("option:selected").attr("class"))?c.val(s.val()):c.val(c.find("option:first").val()),a=n)}var n=e(this),t=n.find(".cascadingselect-parent"),a="",c=n.find(".cascadingselect-child"),d=c.find("option"),s=c.find(":selected");t.bind("cascadingSelectChanged",i).change(function(){e(this).trigger("cascadingSelectChanged")}).trigger("cascadingSelectChanged")})}t.bind(n.NEW_CONTENT_ADDED,function(e,n,t){t!==i.panelRefreshed&&a(n)})});