AJS.test.require(["jira.webresources:jira-global","jira.webresources:searchers"],function(){"use strict";var e=this,t=require("jira/util/formatter"),o=require("jira/searchers/element/project-picker-options"),r=["test 1","test 2","3 test"];module("projectPickerOptions",{setup:function(){e.sandbox=sinon.sandbox.create(),e.sandbox.stub(t,"format",function(){return"TEXT"}),e.createProject=function(e,t){return{id:t,avatar:"http://url/avatar/"+t,name:e,html:"test project <strong>"+e+"</strong> (<strong>"+e+"</strong>)"}},e.createProjects=function(t){return{projects:r.map(e.createProject),total:t||r.length}}},teardown:function(){e.sandbox.restore()}}),test("should setup ajax options",function(){var e=o({});ok(e.ajaxOptions,"ajaxOptions defined"),ok(e.ajaxOptions.url,"REST endpoint path defined"),ok(e.ajaxOptions.data.maxResults>0,"maxResults query param is set"),ok(!e.query,"Uses debouncing"),ok(e.ajaxOptions.formatResponse&&"function"==typeof e.ajaxOptions.formatResponse,"formatResponse method defined")}),test("should setup CheckboxMultiSelect options",function(){var e=o({});equal(e.content,"mixed","mixed content defined"),ok(e.maxInlineResultsDisplayed>0,"max inline results defined")}),test("should keep input options",function(){var e={test1:"test 1 option",test2:2,test3:!1},t=o(e);equal(t.test1,e.test1,"keep string property"),equal(t.test2,e.test2,"keep numeric property"),equal(t.test3,e.test3,"keep boolean property")}),test("should format response",function(){var t=e.createProjects(),r=o({}),s=r.ajaxOptions.formatResponse(t);t.projects.forEach(function(e){return ok(s[0].items().some(function(t){return t.value()===e.id&&t.icon()===e.avatar&&t.html()===e.html&&t.label()==="test project "+e.name+" ("+e.name+")"}),"should format response for project id:"+e.id+", name:"+e.name)}),ok(!0===s[0].fetchedThroughAjaxCall(),"marked as ajax call response")}),test("should include footer text when number of projects returned was trimmed",function(){var t=e.createProjects(5),r=o({}),s=r.ajaxOptions.formatResponse(t);ok("TEXT"===s[0].footerText(),"footer text is set")}),test("should omit footer text when all projects were returned",function(){var t=e.createProjects(),r=o({}),s=r.ajaxOptions.formatResponse(t);ok(!s[0].footerText(),"footer text is not set")})});