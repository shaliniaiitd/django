var _slicedToArray=function(){function e(e,a){var t=[],r=!0,s=!1,i=void 0;try{for(var g,n=e[Symbol.iterator]();!(r=(g=n.next()).done)&&(t.push(g.value),!a||t.length!==a);r=!0);}catch(e){s=!0,i=e}finally{try{!r&&n.return&&n.return()}finally{if(s)throw i}}return t}return function(a,t){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a))return e(a,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();!function(){"use strict";function e(e,a,t){(a.loadingPromises||[]).forEach(function(a){a.resolve({src:e,status:t})}),a.loadingPromises=[]}function a(a){var t=u(),r=x()[g(a.src)];if(r)r.loadingPromises.push(t),r.isOnLoadMarked&&e(a.src,r,p);else if(window.document&&"complete"===window.document.readyState)t.resolve({src:a.src,status:p});else{var s=void 0,i=function e(r){clearTimeout(s),c(window).off("load",e),t.resolve({src:a.src,status:r})};s=setTimeout(function(){i(h)},f),c(window).on("load",function(){i(p)})}return t}function t(e){var t=e.map(function(e){return a(e)});return c.when.apply(c,t)}function r(){var e=c.Deferred();return c(function(){var a=c("#dashboard");if(0===a.length&&e.reject(),a.hasClass("initializing")){var t=function t(){a.off("initialized",t),e.resolve()};a.on("initialized",t)}else e.resolve()}),e.promise()}function s(e){return b[e]}function i(){var e=void 0,a=c("dashboard")[0];try{e=JSON.parse(a.getAttribute("layouts")).layouts}catch(e){return{}}var t=e.filter(function(e){return e.active})[0];return t&&t.gadgets&&t.gadgets.length?t.gadgets:{}}function g(e){return"string"==typeof e?e.replace(/#[^#]*$/,""):e}function n(){var e=c("meta[name=ajs-dashboard-id]").attr("content");l.start({key:m,isInitial:!0,entityId:e})}function d(e){if(!e||/^\s+$/.test(e))return"[empty]";var a=x()[g(e)];if(a)return a.specId;var t=v.exec(e);return t?t[0]:"[masked]"}function o(e){l.end({key:m,reporters:P.concat(function(){return i().map(function(e){return s(e.amdModule||e.gadgetSpecUrl)||"gadget.unknown"}).reduce(function(e,a){return e.hasOwnProperty(a)?e[a]+=1:e[a]=1,e},{})})}),S&&clearTimeout(S),c(document).off("gadget-loaded",w);var a=!0,t=!1,r=void 0;try{for(var g,n=Object.entries(e)[Symbol.iterator]();!(a=(g=n.next()).done);a=!0){var o=g.value,u=_slicedToArray(o,2),f=u[1];f.status===h&&console.log("dashboard.metrics","iframe onload timed out: "+d(f.src))}}catch(e){t=!0,r=e}finally{try{!a&&n.return&&n.return()}finally{if(t)throw r}}}var l=require("internal/browser-metrics"),c=require("jquery"),u=require("jira/jquery/deferred"),m="jira.dashboard",f=1e4,p="loaded",h="timeout",j=/\/plugins\/servlet\/gadgets\/ifr\?/,v=/^(?:[^:]+:)?[.\/]*[^\/:#?]+/,b={"jira-dashboard-items/assigned-to-me":"gadget.jira.assigned.to.me","jira-dashboard-items/bubble-chart-dashboard-item":"gadget.jira.bubble.chart","jira-dashboard-items/createdvsresolved":"gadget.jira.created.resolved","jira-dashboard-items/favourite-filters":"gadget.jira.favourite.filters","jira-dashboard-items/filter-results":"gadget.jira.filter.results","jira-dashboard-items/in-progress":"gadget.jira.in.progress","jira-dashboard-items/labels":"gadget.jira.labels","jira-dashboard-items/piechart":"gadget.jira.piechart","jira-dashboard-items/sprint-days-remaining":"gadget.jira.sprint.days","jira-dashboard-items/sprint-health":"gadget.jira.sprint.health","jira-dashboard-items/stats":"gadget.jira.stats","jira-dashboard-items/two-dimensional-stats":"gadget.jira.two.dimensional.stats","jira-dashboard-items/voted":"gadget.jira.voted","jira-dashboard-items/watched":"gadget.jira.watched","rest/gadgets/1.0/g/com.atlassian.bonfire.plugin:bonfire-test-sessions-gadget/gadget/bonfire-sessions-gadget.xml":"gadget.rest.bonfire.sessions","rest/gadgets/1.0/g/com.atlassian.jira.ext.calendar:issuescalendar-gadget/templates/plugins/jira/portlets/calendar/gadget/calendar-gadget.xml":"gadget.rest.jiraext.issues.calendar","rest/gadgets/1.0/g/com.atlassian.jira.ext.charting:firstresponse-gadget/com/atlassian/jira/ext/charting/gadget/firstresponse-gadget.xml":"gadget.rest.jiraext.first.response","rest/gadgets/1.0/g/com.atlassian.jira.ext.charting:numberoftimesinstatus-gadget/com/atlassian/jira/ext/charting/gadget/numberoftimesinstatus-gadget.xml":"gadget.rest.jiraext.times.in.status","rest/gadgets/1.0/g/com.atlassian.jira.ext.charting:timeinstatus-gadget/com/atlassian/jira/ext/charting/gadget/timeinstatus-gadget.xml":"gadget.rest.jiraext.issues.calendar.time.in.status","rest/gadgets/1.0/g/com.atlassian.jira.ext.charting:workloadpie-gadget/com/atlassian/jira/ext/charting/gadget/workloadpie-gadget.xml":"gadget.rest.jiraext.workload","rest/gadgets/1.0/g/com.atlassian.jira.gadgets:average-age-chart-gadget/gadgets/average-age-gadget.xml":"gadget.rest.jira.average.age","rest/gadgets/1.0/g/com.atlassian.jira.gadgets:heat-map-gadget/gadgets/heatmap-gadget.xml":"gadget.rest.jira.heat.map","rest/gadgets/1.0/g/com.atlassian.jira.gadgets:project-gadget/gadgets/project-gadget.xml":"gadget.rest.jira.project","rest/gadgets/1.0/g/com.atlassian.jira.gadgets:recently-created-chart-gadget/gadgets/recently-created-gadget.xml":"gadget.rest.jira.recently.created","rest/gadgets/1.0/g/com.atlassian.jira.gadgets:resolution-time-gadget/gadgets/resolution-time-gadget.xml":"gadget.rest.jira.resolution.time","rest/gadgets/1.0/g/com.atlassian.jira.gadgets:road-map-gadget/gadgets/roadmap-gadget.xml":"gadget.rest.jira.roadmap","rest/gadgets/1.0/g/com.atlassian.jira.gadgets:time-since-chart-gadget/gadgets/timesince-gadget.xml":"gadget.rest.jira.timesince","rest/gadgets/1.0/g/com.atlassian.jirafisheyeplugin:crucible-charting-gadget/gadgets/crucible-charting-gadget.xml":"gadget.rest.crucible.charting","rest/gadgets/1.0/g/com.atlassian.jirafisheyeplugin:fisheye-charting-gadget/gadgets/fisheye-charting-gadget.xml":"gadget.rest.fisheye.charting","rest/gadgets/1.0/g/com.atlassian.jirafisheyeplugin:fisheye-recent-commits-gadget/gadgets/fisheye-recent-commits-gadget.xml":"gadget.rest.fisheye.recent","rest/gadgets/1.0/g/com.atlassian.jirawallboard.atlassian-wallboard-plugin:spacer-gadget/gadgets/spacerGadget.xml":"gadget.rest.wallboard.spacer","rest/gadgets/1.0/g/com.atlassian.streams.streams-jira-plugin:activitystream-gadget/gadgets/activitystream-gadget.xml":"gadget.rest.wallboard.spacer","rest/gadgets/1.0/g/com.pyxis.greenhopper.jira:greenhopper-gadget-rapid-view/gadgets/greenhopper-rapid-view.xml":"gadget.rest.greenhopper.rapid.view","rest/gadgets/1.0/g/com.pyxis.greenhopper.jira:greenhopper-gadget-sprint-burndown/gadgets/greenhopper-sprint-burndown.xml":"gadget.rest.greenhopper.sprint.burndown","rest/gadgets/1.0/g/com.pyxis.greenhopper.jira:greenhopper-gadget-version-report/gadgets/greenhopper-version-report.xml":"gadget.rest.greenhopper.version"},y=void 0,x=function(){if(y)return y;var e={};return i().filter(function(e){return j.test(e.renderedGadgetUrl)}).forEach(function(a){e[g(a.renderedGadgetUrl)]={key:"jira.gadgets.iframe",specId:a.gadgetSpecUrl,loadingPromises:[],renderedMark:null}}),y=e,e},w=function(a,t){if(t){var r=x()[g(t.gadgetUrl)];r&&r.loadingPromises.length>0&&e(t.gadgetUrl,r,p)}},k=function(){var a=!0,t=!1,r=void 0;try{for(var s,i=Object.entries(x())[Symbol.iterator]();!(a=(s=i.next()).done);a=!0){var g=s.value,n=_slicedToArray(g,2),d=n[0],o=n[1];o&&o.loadingPromises.length>0&&e(d,o,h)}}catch(e){t=!0,r=e}finally{try{!a&&i.return&&i.return()}finally{if(t)throw r}}};c(document).on("gadget-loaded",w);var S=void 0;r().then(function(){S=setTimeout(k,f)});var T=r(),P=[],A=void 0;T.pipe(function(){performance&&(A=Math.round(performance.now()))}),P.push(function(){return"number"==typeof A?{dashboardInitialized:A}:{}}),T.pipe(function(){return n(),t(c("#dashboard").find(".dashboard-item-content").find("iframe").get())}).done(function(){o(arguments)})}();