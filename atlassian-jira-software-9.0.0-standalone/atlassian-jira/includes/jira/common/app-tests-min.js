AJS.test.require(["jira.webresources:jira-global"],function(){"use strict";var t=require("jquery");module("shouldInitTooltips",{setup:function(){var i=this;this.$fixture=t("#qunit-fixture"),this.$fixture.empty(),this.sandbox=sinon.sandbox.create(),this.tooltipStub=this.sandbox.stub(t.fn,"tooltip"),this.assertElementHasTooltip=function(t,e,o,s){o?s.expect(3):s.expect(1),i.tooltipStub.reset();var n=s.async();i.$fixture.append(e),setTimeout(function(){o?(sinon.assert.calledOnce(this.tooltipStub,t+" should have tooltip initialized"),this.tooltipStub.reset(),this.$fixture.empty(),setTimeout(function(){sinon.assert.calledOnce(this.tooltipStub),sinon.assert.calledWithExactly(this.tooltipStub,"destroy"),n()}.bind(this),10)):(sinon.assert.notCalled(this.tooltipStub,t+" should not have tooltip initialized"),n())}.bind(i),10)}},teardown:function(){this.sandbox.restore(),this.$fixture.empty()}}),test("Should not create tooltip for link with title",function(i){var e=t("<a title='title1'></a>");this.assertElementHasTooltip("Link with title",e,!1,i)}),test("Should not create tooltip for link without title",function(i){var e=t("<a></a>");this.assertElementHasTooltip("Link without title",e,!1,i)}),test("Should not create tooltip for span with title",function(i){var e=t("<span title='title1'></span>");this.assertElementHasTooltip("Span with title",e,!1,i)}),test("Should not create tooltip for span without title",function(i){var e=t("<span></span>");this.assertElementHasTooltip("Span without title",e,!1,i)}),test("Should create tooltip for help link with title",function(i){var e=t("<a class='help-lnk' title='title1'></a>");this.assertElementHasTooltip("Help link with title",e,!0,i)}),test("Should not crate tooltip for help link without title",function(i){var e=t("<a class='help-lnk'></a>");this.assertElementHasTooltip("Help link without title",e,!1,i)}),test("Should create tooltip for group picker trigger with title",function(i){var e=t("<span class='grouppicker-trigger' title='title1'></span>");this.assertElementHasTooltip("Group picker trigger with title",e,!0,i)}),test("Should not create tooltip for group picker trigger without title",function(i){var e=t("<span class='grouppicker-trigger'></span>");this.assertElementHasTooltip("Group picker trigger without title",e,!1,i)}),test("Should create tooltip for popup trigger with title",function(i){var e=t("<span class='popup-trigger' title='title1'></span>");this.assertElementHasTooltip("Popup trigger with title",e,!0,i)}),test("Should not create tooltip for popup trigger without title",function(i){var e=t("<span class='popup-trigger'></span>");this.assertElementHasTooltip("Popup trigger without title",e,!1,i)}),module("initHelpLinks",{setup:function(){this.$fixture=t("#qunit-fixture"),this.$fixture.empty(),this.sandbox=sinon.sandbox.create(),this.windowOpenStub=this.sandbox.stub(window,"open")},teardown:function(){this.sandbox.restore(),this.$fixture.empty()}}),test("Given local helplink when clicked should open new window",function(){var i=t("<a href='http://www.atlassian.com' data-helplink='local'>local link</a>");this.$fixture.append(i),i.click(),sinon.assert.calledOnce(this.windowOpenStub),sinon.assert.calledWithExactly(this.windowOpenStub,"http://www.atlassian.com","jiraLocalHelp")}),test("Given non local helplink when clicked should not open new window",function(){var i=t("<a href='http://www.atlassian.com'  data-helplink='remote'>non local link</a>");this.$fixture.append(i),i.click(),sinon.assert.notCalled(this.windowOpenStub)})});