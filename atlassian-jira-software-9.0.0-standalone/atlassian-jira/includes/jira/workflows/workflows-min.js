require(["jquery","wrm/context-path","jira/dialog/form-dialog"],function(e,t,o){"use strict";e(function(){function a(e){return e===l?l:n}function i(t){e.ajax({url:d+"/rest/api/2/mypreferences?key="+s,type:"PUT",contentType:"application/json",dataType:"json",data:a(t)})}function r(t){var o=e("#workflow-"+t);o.hasClass("active")||(c.each(function(){var t=e(this);o.is(t)?t.addClass("active"):t.removeClass("active")}),e(".workflow-view").addClass("hidden"),e(o.attr("href")).removeClass("hidden").trigger(e.Event("show")),e(document.documentElement).css("overflow-y",""))}var n="diagram",l="text",s="workflow-mode",d=t(),c=e(".workflow-view-toggle");e(document).on("click",".workflow-view-toggle",function(t){t.preventDefault();var o=e(this),n=void 0;o.hasClass("active")||(n=a(o.data("mode")),i(n),r(n))}),c.length||i(e("#jwd").length>0?n:l),new o({id:"edit-workflow-dialog",trigger:"#edit-workflow-trigger"})})});