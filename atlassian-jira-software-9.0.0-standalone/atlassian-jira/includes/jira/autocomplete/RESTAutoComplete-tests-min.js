AJS.test.require(["jira.webresources:autocomplete"],function(){"use strict";var e=require("jquery"),t=require("jira/util/objects"),s=require("jira/autocomplete/rest-autocomplete"),n='{"elements":[{"name":"something","html":"<div></div>"}],"total":1}';QUnit.config.testTimeout=5e3,module("RESTAutoComplete",{initRestAutoComplete:function(){var e=t.begetObject(s);return e.queryDelay=0,e.minQueryLength=2,e.getAjaxParams=function(){return{url:"my/test/url",data:{},dataType:"json",type:"GET"}},e},setup:function(){this.sandbox=sinon.sandbox.create(),this.server=this.sandbox.useFakeServer(),this.server.autoRespond=!0,this.server.respondWith("GET",new RegExp("my/test/url"),[200,{"Content-Type":"application/json"},n]),this.restAutoComplete=this.initRestAutoComplete()},teardown:function(){this.server.restore(),this.sandbox.restore()}}),test("RenderSuggestions is not called when response container is undefined",function(){this.restAutoComplete.responseContainer=void 0;var e=this.sandbox.stub(this.restAutoComplete,"renderSuggestions");this.restAutoComplete.dispatcher("1234"),ok(e.notCalled,"renderSuggestions was not called")}),test("RenderSuggestions is not called when response container is null",function(){this.restAutoComplete.responseContainer=null;var e=this.sandbox.stub(this.restAutoComplete,"renderSuggestions");this.restAutoComplete.dispatcher("1234"),ok(e.notCalled,"renderSuggestions was not called")}),test("RenderSuggestions is called when response container is initialized and there is a saved response",function(){var t={a:1,b:2};this.sandbox.stub(this.restAutoComplete,"getSavedResponse").returns(t);var s=this.sandbox.stub(this.restAutoComplete,"renderSuggestions");this.restAutoComplete.field=e("<div>"),this.restAutoComplete.buildResponseContainer(),this.restAutoComplete.dispatcher("1234"),ok(s.calledOnce,"renderSuggestions was called"),ok(t===s.args[0][0],"renderSuggestions received correct parameters.")}),test("RenderSuggestions is called when response container is initialized and there is no saved response.",function(t){var s=t.async();this.restAutoComplete.renderSuggestions=function(e){ok(n===JSON.stringify(e),"renderSuggestions was called."),s()},this.restAutoComplete.field=e("<div>"),this.restAutoComplete.buildResponseContainer(),this.restAutoComplete.dispatcher("1234")})});