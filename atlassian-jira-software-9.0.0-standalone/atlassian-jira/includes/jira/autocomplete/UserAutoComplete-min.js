define("jira/autocomplete/user-autocomplete",["jira/autocomplete/rest-autocomplete","jira/data/parse-options-from-fieldset","jira/field/create-user-picker-popup-trigger","jira/util/browser","jira/util/elements","jira/util/objects","wrm/context-path","jquery"],function(e,t,i,r,a,o,n,l){"use strict";function s(e,t){e.on("click",i.createUserPickerPopupTrigger({urlBase:d,formName:t.formName||e.closest("form").attr("name"),fieldName:t.fieldName,multiSelect:t.multiSelect,fieldConfigId:t.fieldConfigId,projectIds:t.projectId,actionToOpen:t.actionToOpen}))}function u(e,t){p({field:parent?e:null,fieldID:t.fieldName,fieldConfigID:t.fieldConfigId,projectId:t.projectId,delimChar:!1===t.multiSelect?void 0:",",ajaxData:{fieldName:t.fieldName}})}var d=n(),c=d+"/rest/api/1.0/users/picker",p=function(t){function i(e){var t=!1,i=e.closest("form");return i.length&&i.hasClass("submitting")&&(t=!0),t}var n=o.begetObject(e);return n.getAjaxParams=function(){return{url:c,data:{fieldName:t.fieldID,fieldConfigId:t.fieldConfigID,projectId:t.projectId},dataType:"json",type:"GET"}},n.renderSuggestions=function(e){if(i(this.field)||!r.isSelenium()&&!a.elementIsFocused(this.field))return!1;var t=void 0,o=[];return this.clearResponseContainer(),e&&e.users&&e.users.length>0&&(t=l("<ul/>").appendTo(this.responseContainer),l(e.users).each(function(){o.push([l("<li/>").html(this.html).appendTo(t),this.name])})),e.footer&&this.responseContainer.append(l("<div/>").addClass("yui-ac-ft").html(e.footer).css("display","block")),o.length>0&&(n.addSuggestionControls(o),l(".atlassian-autocomplete div.yad, .atlassian-autocomplete .labels li").textOverflow({autoUpdate:!0})),o},t.minQueryLength=2,t.queryDelay=.25,n.init(t),n};return p.init=function(e){l("fieldset.user-picker-params",e).each(function(){var i=t(l(this)),r=i.fieldId||i.fieldName,a=l(e).find("#"+r);s(l("#"+r+"_container").find(".popup-trigger"),i),i.userPickerEnabled&&u(a,i)})},p}),AJS.namespace("jira.widget.autocomplete.Users",null,require("jira/autocomplete/user-autocomplete")),AJS.namespace("JIRA.UserAutoComplete",null,require("jira/autocomplete/user-autocomplete"));