AJS.test.require(["jira.webresources:viewcustomfields"],function(){"use strict";var e=require("jira/customfields/customfieldsSelectItemCalendarView"),t=require("jira/util/data/meta"),a=require("jquery"),i=require("jira/backbone-1.3.3");module("CustomfieldsSelectItemCalendarView",{setup:function(){this.sandbox=sinon.sandbox.create({useFakeServer:!0}),this.datePickerSpy=this.sandbox.spy(a.fn,"datePicker"),a("#qunit-fixture").html("<div id='customfields-calendar'></div>"),this.$view=a("#qunit-fixture").find("#customfields-calendar"),this.calendarView=new e({el:"#customfields-calendar",model:new i.Model({name:"my-name",label:"Some label",value:0})}).render()},teardown:function(){this.sandbox.restore()}}),test("Renders date picker",function(){ok(this.datePickerSpy.calledOnce,"Date picker called"),equal(this.$view.find("label").text(),"Some label","Date picker has label"),equal(this.$view.find("input").attr("id"),"customfields-calendar-input-my-name","Date picker has id")}),test("Formats date properly",function(){var e=this.calendarView.getDateFormat;this.sandbox.stub(t,"get").onCall(0).returns("dd/MMM/YYYY").onCall(1).returns("d/M/y").onCall(2).returns("dd/MM/yyyy").onCall(3).returns("YY.d.M"),equal(e(),"dd/M/yy","Supports long month name and long year"),equal(e(),"d/m/y","Supports month name and day without leading zero"),equal(e(),"dd/mm/yy","Supports month name and day with leading zero"),equal(e(),"y.d.m","Supports dots and US order")})});